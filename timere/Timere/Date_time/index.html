<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Date_time (timere.Timere.Date_time)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">timere</a> &#x00BB; <a href="../index.html">Timere</a> &#x00BB; Date_time</nav><h1>Module <code>Timere.Date_time</code></h1></header><dl><dt class="spec type" id="type-tz_info"><a href="#type-tz_info" class="anchor"></a><code><span class="keyword">type</span> tz_info</code><code> = <a href="../Time_zone/index.html#type-t">Time_zone.t</a> * <span><a href="../Duration/index.html#type-t">Duration.t</a> option</span></code></dt></dl><dl><dt class="spec value" id="val-tz_offset_of_tz_info"><a href="#val-tz_offset_of_tz_info" class="anchor"></a><code><span class="keyword">val</span> tz_offset_of_tz_info : <a href="index.html#type-tz_info">tz_info</a> <span>&#45;&gt;</span> <span><a href="../Duration/index.html#type-t">Duration.t</a> option</span></code></dt></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = <span class="keyword">private</span> </code><code>{</code><table class="record"><tr id="type-t.year" class="anchored"><td class="def field"><a href="#type-t.year" class="anchor"></a><code>year : int;</code></td></tr><tr id="type-t.month" class="anchored"><td class="def field"><a href="#type-t.month" class="anchor"></a><code>month : <a href="../index.html#type-month">month</a>;</code></td></tr><tr id="type-t.day" class="anchored"><td class="def field"><a href="#type-t.day" class="anchor"></a><code>day : int;</code></td></tr><tr id="type-t.hour" class="anchored"><td class="def field"><a href="#type-t.hour" class="anchor"></a><code>hour : int;</code></td></tr><tr id="type-t.minute" class="anchored"><td class="def field"><a href="#type-t.minute" class="anchor"></a><code>minute : int;</code></td></tr><tr id="type-t.second" class="anchored"><td class="def field"><a href="#type-t.second" class="anchor"></a><code>second : int;</code></td></tr><tr id="type-t.ns" class="anchored"><td class="def field"><a href="#type-t.ns" class="anchor"></a><code>ns : int;</code></td></tr><tr id="type-t.tz_info" class="anchored"><td class="def field"><a href="#type-t.tz_info" class="anchor"></a><code>tz_info : <a href="index.html#type-tz_info">tz_info</a>;</code></td></tr></table><code>}</code></dt><dd><p><code>ns</code> may be <code>&gt;= 10^9</code> to represent leap second, but always remains <code>&lt; 2 * 10^9</code>.</p><p><code>s</code> is always <code>&gt;= 0</code> and <code>&lt; 60</code>, even when second 60 is used during construction. In other words, second 60 is represented via <code>ns</code> field.</p></dd></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val</span> make : <span>?&#8288;tz:<a href="../Time_zone/index.html#type-t">Time_zone.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;ns:int</span> <span>&#45;&gt;</span> <span>?&#8288;frac:float</span> <span>&#45;&gt;</span> <span>year:int</span> <span>&#45;&gt;</span> <span>month:<a href="../index.html#type-month">month</a></span> <span>&#45;&gt;</span> <span>day:int</span> <span>&#45;&gt;</span> <span>hour:int</span> <span>&#45;&gt;</span> <span>minute:int</span> <span>&#45;&gt;</span> <span>second:int</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> option</span></code></dt><dd><p>Constructs a date time providing only a time zone (defaults to local time zone).</p><p>Nanosecond used is the addition of <code>ns</code> and <code>frac * number of nanoseconds in one second</code>.</p><p>A precise offset is inferred if possible.</p><p>Note that this may yield a ambiguous date time if the time zone has varying offsets, e.g. DST.</p><p>See <a href="index.html#val-make_unambiguous"><code>make_unambiguous</code></a> for the more precise construction.</p><p>Leap second can be specified by providing 60 for <code>second</code>. Note that leap second informtation is lost upon translation to timestamp(s), specifically second 60 is treated as second 59.</p><dl><dt>raises Invalid_argument</dt><dd><p>if any of <code>hour</code>, <code>minute</code>, <code>second</code>, <code>ns</code>, <code>frac</code> is negative</p></dd></dl><dl><dt>raises Invalid_argument</dt><dd><p>if <code>total ns &gt;= 10^9</code></p></dd></dl><dl><dt>raises Invalid_argument</dt><dd><p>if <code>day &lt; 1 || 31 &lt; day</code></p></dd></dl><dl><dt>raises Invalid_argument</dt><dd><p>if <code>hour &gt; 23</code></p></dd></dl><dl><dt>raises Invalid_argument</dt><dd><p>if <code>minute &gt; 59</code></p></dd></dl><dl><dt>raises Invalid_argument</dt><dd><p>if <code>second &gt; 60</code></p></dd></dl></dd></dl><dl><dt class="spec value" id="val-make_exn"><a href="#val-make_exn" class="anchor"></a><code><span class="keyword">val</span> make_exn : <span>?&#8288;tz:<a href="../Time_zone/index.html#type-t">Time_zone.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;ns:int</span> <span>&#45;&gt;</span> <span>?&#8288;frac:float</span> <span>&#45;&gt;</span> <span>year:int</span> <span>&#45;&gt;</span> <span>month:<a href="../index.html#type-month">month</a></span> <span>&#45;&gt;</span> <span>day:int</span> <span>&#45;&gt;</span> <span>hour:int</span> <span>&#45;&gt;</span> <span>minute:int</span> <span>&#45;&gt;</span> <span>second:int</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><dl><dt>raises Invalid_argument</dt><dd><p>if <code>make</code> fails</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-make_unambiguous"><a href="#val-make_unambiguous" class="anchor"></a><code><span class="keyword">val</span> make_unambiguous : <span>?&#8288;tz:<a href="../Time_zone/index.html#type-t">Time_zone.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;ns:int</span> <span>&#45;&gt;</span> <span>?&#8288;frac:float</span> <span>&#45;&gt;</span> <span>year:int</span> <span>&#45;&gt;</span> <span>month:<a href="../index.html#type-month">month</a></span> <span>&#45;&gt;</span> <span>day:int</span> <span>&#45;&gt;</span> <span>hour:int</span> <span>&#45;&gt;</span> <span>minute:int</span> <span>&#45;&gt;</span> <span>second:int</span> <span>&#45;&gt;</span> <span>tz_offset:<a href="../Duration/index.html#type-t">Duration.t</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> option</span></code></dt><dd><p>Constructs a date time providing time zone offset in seconds, and optionally a time zone.</p><p>Nanosecond used is the addition of <code>ns</code> and <code>frac * number of nanoseconds in one second</code>.</p><p>If a time zone is provided, then the offset is checked against the time zone record to make sure the time zone does use said offset for the particular date time..</p><p>Same leap second handling and error handling as <code>make</code>.</p></dd></dl><dl><dt class="spec value" id="val-make_unambiguous_exn"><a href="#val-make_unambiguous_exn" class="anchor"></a><code><span class="keyword">val</span> make_unambiguous_exn : <span>?&#8288;tz:<a href="../Time_zone/index.html#type-t">Time_zone.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;ns:int</span> <span>&#45;&gt;</span> <span>?&#8288;frac:float</span> <span>&#45;&gt;</span> <span>year:int</span> <span>&#45;&gt;</span> <span>month:<a href="../index.html#type-month">month</a></span> <span>&#45;&gt;</span> <span>day:int</span> <span>&#45;&gt;</span> <span>hour:int</span> <span>&#45;&gt;</span> <span>minute:int</span> <span>&#45;&gt;</span> <span>second:int</span> <span>&#45;&gt;</span> <span>tz_offset:<a href="../Duration/index.html#type-t">Duration.t</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><dl><dt>raises Invalid_argument</dt><dd><p>if <code>make_umabiguous</code> fails</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-is_leap_second"><a href="#val-is_leap_second" class="anchor"></a><code><span class="keyword">val</span> is_leap_second : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt></dl><dl><dt class="spec type" id="type-local_result"><a href="#type-local_result" class="anchor"></a><code><span class="keyword">type</span> <span>'a local_result</span></code> = <code>[ </code><table class="variant"><tr id="type-local_result.Single" class="anchored"><td class="def constructor"><a href="#type-local_result.Single" class="anchor"></a><code>| </code><code>`Single <span class="keyword">of</span> <span class="type-var">'a</span></code></td></tr><tr id="type-local_result.Ambiguous" class="anchored"><td class="def constructor"><a href="#type-local_result.Ambiguous" class="anchor"></a><code>| </code><code>`Ambiguous <span class="keyword">of</span> <span class="type-var">'a</span> * <span class="type-var">'a</span></code></td></tr></table><code> ]</code></dt><dd><p>Result for when a local date time may be involved, e.g. using a date time with no precise time zone offset attached.</p><ul><li><code>`Single</code> is yielded when the date time maps to exactly one <code>'a</code>. This happens when date time carries an accurate offset, or when the date time is not affected by any offset shifts (thus an accurate offset can be inferred).</li><li><code>`Ambiguous</code> is yielded when date time maps to more than one (exactly two) <code>'a</code>. This happens when DST ends and &quot;goes back an hour&quot; for instance.</li></ul></dd></dl><dl><dt class="spec value" id="val-to_timestamp"><a href="#val-to_timestamp" class="anchor"></a><code><span class="keyword">val</span> to_timestamp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../index.html#type-timestamp">timestamp</a> <a href="index.html#type-local_result">local_result</a></span></code></dt><dd><p><code>to_timestamp</code> loses information about leap second</p></dd></dl><dl><dt class="spec value" id="val-to_timestamp_single"><a href="#val-to_timestamp_single" class="anchor"></a><code><span class="keyword">val</span> to_timestamp_single : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-timestamp">timestamp</a></code></dt><dd><dl><dt>raises Invalid_argument</dt><dd><p>if <code>to_timestamp</code> does not yield a <code>`Single</code> result</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-to_timestamp_float"><a href="#val-to_timestamp_float" class="anchor"></a><code><span class="keyword">val</span> to_timestamp_float : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>float <a href="index.html#type-local_result">local_result</a></span></code></dt><dt class="spec value" id="val-to_timestamp_float_single"><a href="#val-to_timestamp_float_single" class="anchor"></a><code><span class="keyword">val</span> to_timestamp_float_single : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dd><dl><dt>raises Invalid_argument</dt><dd><p>if <code>to_timestamp_precise</code> does not yield a <code>`Single</code> result</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-min_of_local_result"><a href="#val-min_of_local_result" class="anchor"></a><code><span class="keyword">val</span> min_of_local_result : <span><span class="type-var">'a</span> <a href="index.html#type-local_result">local_result</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-max_of_local_result"><a href="#val-max_of_local_result" class="anchor"></a><code><span class="keyword">val</span> max_of_local_result : <span><span class="type-var">'a</span> <a href="index.html#type-local_result">local_result</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-of_timestamp"><a href="#val-of_timestamp" class="anchor"></a><code><span class="keyword">val</span> of_timestamp : <span>?&#8288;tz_of_date_time:<a href="../Time_zone/index.html#type-t">Time_zone.t</a></span> <span>&#45;&gt;</span> <a href="../index.html#type-timestamp">timestamp</a> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> option</span></code></dt><dt class="spec value" id="val-of_timestamp_float"><a href="#val-of_timestamp_float" class="anchor"></a><code><span class="keyword">val</span> of_timestamp_float : <span>?&#8288;tz_of_date_time:<a href="../Time_zone/index.html#type-t">Time_zone.t</a></span> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> option</span></code></dt><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-min_val"><a href="#val-min_val" class="anchor"></a><code><span class="keyword">val</span> min_val : <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-max_val"><a href="#val-max_val" class="anchor"></a><code><span class="keyword">val</span> max_val : <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-now"><a href="#val-now" class="anchor"></a><code><span class="keyword">val</span> now : <span>?&#8288;tz_of_date_time:<a href="../Time_zone/index.html#type-t">Time_zone.t</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-to_weekday"><a href="#val-to_weekday" class="anchor"></a><code><span class="keyword">val</span> to_weekday : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-weekday">weekday</a></code></dt></dl><dl><dt class="spec exception" id="exception-Date_time_cannot_deduce_tz_offset_s"><a href="#exception-Date_time_cannot_deduce_tz_offset_s" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Date_time_cannot_deduce_tz_offset_s</span> <span class="keyword">of</span> <a href="index.html#type-t">t</a></code></dt></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <span>?&#8288;format:string</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Pretty printing for date time.</p><p>Default format string:</p><pre>{year} {mon:Xxx} {day:0X} {hour:0X}:{min:0X}:{sec:0X} \
{tzoff-sign}{tzoff-hour:0X}:{tzoff-min:0X}:{tzoff-sec:0X}</pre><p>Format string specification:</p><pre>{{               literal {
{year}           year
{mon:Xxx}        abbreviated month name (e.g. Jan), casing of 'x' controls the casing
{mon:Xx*}        full month name (e.g. January), casing of first 'x' controls casing of first letter,
                 casing of second 'x' controls casing of following letters
{mon:cX}         month in number form (e.g. 01) character 'c' before 'X' is used for padding
                 (leave out character for no padding)
{day:cX}        month day (e.g.  1) character 'c' before 'X' is used for padding
                 (leave out character for no padding)
{wday:Xxx}       abbreviated weekday name (e.g. Sun), the casing of 'x' controls the casing
{wday:Xx*}       full weekday name (e.g. Sunday), casing of first 'x' controls casing of first letter,
                 casing of second 'x' controls casing of following letters
{hour:cX}        hour in 24-hour format, character 'c' before 'X' determines padding
                 (leave out character for no padding)
{12hour:cX}      hour in 12-hour format, character 'c' before 'X' determines padding
                 (leave out character for no padding)
{min:cX}         minute, character 'c' before 'X' determines padding
                 (leave out character for no padding)
{sec:cX}         second, character 'c' before 'X' determines padding
                 (leave out character for no padding)
{ns}             nanosecond
{sec-frac:N}     fraction of second (only digits)
                 N determines the number of digits to take after decimal point
                 result is rounded to closest fraction of said precision
{tzoff-sign}     time zone offset sign ('+' or '-')
                 raises Date_time_cannot_deduce_tz_offset_s if time zone offset cannot be calculated
{tzoff-hour:cX}  time zone offset hour, follows same padding rule as &quot;{hour:cX}&quot;
                 raises Date_time_cannot_deduce_tz_offset_s if time zone offset cannot be calculated
{tzoff-min:cX}   time zone offset minute, follows same padding rule as &quot;{min:cX}&quot;
                 raises Date_time_cannot_deduce_tz_offset_s if time zone offset cannot be calculated
{tzoff-sec:cX}   time zone offset second, follows same padding rule as &quot;{sec:cX}&quot;
                 raises Date_time_cannot_deduce_tz_offset_s if time zone offset cannot be calculated</pre></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <span>?&#8288;format:string</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string option</span></code></dt><dd><p>String conversion using <code>pp</code>.</p><p>Returns <code>None</code> instead of raising exception when time zone offset cannot be deduced but required by the format string</p></dd></dl><dl><dt class="spec value" id="val-pp_rfc3339"><a href="#val-pp_rfc3339" class="anchor"></a><code><span class="keyword">val</span> pp_rfc3339 : <span>?&#8288;frac_s:int</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>frac_s</code> defaults to as many digits as required for a lossless representation.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>frac_s &lt; 0 || frac_s &gt; 9</code></p></dd></dl><dl><dt>raises Date_time_cannot_deduce_tz_offset_s</dt><dd><p>if time zone offset cannot be calculated</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-pp_rfc3339_milli"><a href="#val-pp_rfc3339_milli" class="anchor"></a><code><span class="keyword">val</span> pp_rfc3339_milli : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-pp_rfc3339_micro"><a href="#val-pp_rfc3339_micro" class="anchor"></a><code><span class="keyword">val</span> pp_rfc3339_micro : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-pp_rfc3339_nano"><a href="#val-pp_rfc3339_nano" class="anchor"></a><code><span class="keyword">val</span> pp_rfc3339_nano : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-to_rfc3339"><a href="#val-to_rfc3339" class="anchor"></a><code><span class="keyword">val</span> to_rfc3339 : <span>?&#8288;frac_s:int</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string option</span></code></dt><dd><p>String conversion using <code>pp_rfc3339</code>.</p><p>Returns <code>None</code> if time zone offset cannot be deduced instead of raising exception.</p></dd></dl><dl><dt class="spec value" id="val-to_rfc3339_milli"><a href="#val-to_rfc3339_milli" class="anchor"></a><code><span class="keyword">val</span> to_rfc3339_milli : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string option</span></code></dt><dt class="spec value" id="val-to_rfc3339_micro"><a href="#val-to_rfc3339_micro" class="anchor"></a><code><span class="keyword">val</span> to_rfc3339_micro : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string option</span></code></dt><dt class="spec value" id="val-to_rfc3339_nano"><a href="#val-to_rfc3339_nano" class="anchor"></a><code><span class="keyword">val</span> to_rfc3339_nano : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string option</span></code></dt><dt class="spec value" id="val-of_iso8601"><a href="#val-of_iso8601" class="anchor"></a><code><span class="keyword">val</span> of_iso8601 : string <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-t">t</a>, string)</span> Stdlib.result</span></code></dt><dd><p>Parses a subset of ISO8601, up to 9 fractional digits for second (nanosecond precision).</p><p>If more than 9 fractional digits are provided, then only the first 9 digits are used, i.e. no rounding.</p></dd></dl><dl><dt class="spec value" id="val-to_sexp"><a href="#val-to_sexp" class="anchor"></a><code><span class="keyword">val</span> to_sexp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> CCSexp.t</code></dt><dt class="spec value" id="val-to_sexp_string"><a href="#val-to_sexp_string" class="anchor"></a><code><span class="keyword">val</span> to_sexp_string : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-of_sexp"><a href="#val-of_sexp" class="anchor"></a><code><span class="keyword">val</span> of_sexp : CCSexp.t <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-t">t</a>, string)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-of_sexp_string"><a href="#val-of_sexp_string" class="anchor"></a><code><span class="keyword">val</span> of_sexp_string : string <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-t">t</a>, string)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-pp_sexp"><a href="#val-pp_sexp" class="anchor"></a><code><span class="keyword">val</span> pp_sexp : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt></dl></div></body></html>