<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Timedesc (timedesc.Timedesc)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">timedesc</a> &#x00BB; Timedesc</nav><header class="odoc-preamble"><h1>Module <code><span>Timedesc</span></code></h1><p>Time description and manipulations</p><p>Timedesc provides utilities to describe points of time, and properly handle calendar and time zone information.</p></header><nav class="odoc-toc"><ul><li><a href="#tutorial">Tutorial</a><ul><li><a href="#getting-started">Getting started</a></li><li><a href="#tute_time_zone">Time zone</a></li><li><a href="#span/duration">Span/duration</a></li><li><a href="#using-both-ptime-and-timedesc">Using both Ptime and Timedesc</a></li></ul></li><li><a href="#advanced-usage">Advanced usage</a><ul><li><a href="#unambiguous-date-time">Unambiguous date time</a></li><li><a href="#other-calendar-systems">Other calendar systems</a></li><li><a href="#using-date-by-itself">Using date by itself</a></li></ul></li><li><a href="#further-reading">Further reading</a><ul><li><a href="#misconceptions">Misconceptions</a></li><li><a href="#time-zone,-time-zone-offset,-and-date-time">Time zone, time zone offset, and date time</a></li><li><a href="#timedesc-date-time-api-behaviour-highlights">Timedesc date time API behaviour highlights</a></li></ul></li><li><a href="#basic-exceptions">Basic exceptions</a></li><li><a href="#basic-types">Basic types</a></li><li><a href="#span">Span</a></li><li><a href="#date-time-components">Date time components</a><ul><li><a href="#partial-date">Partial date</a></li><li><a href="#date">Date</a></li><li><a href="#time">Time</a></li><li><a href="#time-zone">Time zone</a></li></ul></li><li><a href="#date-time">Date time</a><ul><li><a href="#constructors_6">Constructors</a></li><li><a href="#accessors_6">Accessors</a></li><li><a href="#conversion_3">Conversion</a></li><li><a href="#comparison_6">Comparison</a></li><li><a href="#constants_2">Constants</a></li><li><a href="#now">Now</a></li><li><a href="#pretty-printing_10">Pretty printing</a></li><li><a href="#parsing_8">Parsing</a></li><li><a href="#sexp_4">Sexp</a></li></ul></li><li><a href="#timestamp">Timestamp</a></li><li><a href="#interval">Interval</a></li><li><a href="#time-zone-less-date-time">Time zone-less date time</a></li><li><a href="#other-date-time-systems">Other date time systems</a></li><li><a href="#misc">Misc</a></li></ul></nav><div class="odoc-content"><h2 id="tutorial"><a href="#tutorial" class="anchor"></a>Tutorial</h2><h3 id="getting-started"><a href="#getting-started" class="anchor"></a>Getting started</h3><p>Suppose we want to get the time right now, we can simply do <code>Timedesc.now ()</code>. But what if we want to get the time right now in a different time zone? Say New York? Then we can simply do:</p><p><code>Timedesc.now ~tz_of_date_time:(Timedesc.Time_zone.make_exn &quot;America/New_York&quot;) ()</code>.</p><p>And if we want to construct a date time from scratch, we can use constructors such as <a href="#val-make"><code>make</code></a>, with similar time zone specification:</p><p><code>Timedesc.make ~tz:(Timedesc.Time_zone.make_exn &quot;Australia/Sydney&quot;) ~year:2021 ~month:5 ~day:30 ~hour:14 ~minute:10 ~second:0 ()</code>.</p><p>Since we deal with timestamps quite frequently, lets have a look at how Timedesc also makes working with them easier. Suppose we receive a timestamp similar to the result returned by <code>Unix.gettimeofday</code>, i.e. seconds since unix epoch in <code>float</code>, we can digest it in myriad ways. If we just want to construct a date time out of it, then we can use <a href="#val-of_timestamp_float_s"><code>of_timestamp_float_s</code></a>. If we want to get it into the representation used in Timedesc, say to perform arithmetic operations over it etc, then we can use <a href="Timestamp/index.html#val-of_float_s"><code>Timestamp.of_float_s</code></a>. But in either case, we can always swap back and forth via <a href="#val-to_timestamp"><code>to_timestamp</code></a> and <a href="#val-of_timestamp"><code>of_timestamp</code></a>.</p><p>In general it is better to use <a href="#timestamp">Timestamp</a> as much as possible, unless you require a precision higher than nanosecond. This is because floating point is a lossy representation - if you convert a date time to floating point and back, you may not get the same date time back (i.e. it may not round trip). Also, performing arithmetic operations over floating points can introduce more and more errors, and it is advisable to use the arithmetic functions provided in <a href="Span/index.html"><code>Span</code></a> or <a href="Timestamp/index.html"><code>Timestamp</code></a>.</p><p>To access the values of date time, we can use the constructors such as <a href="#val-year"><code>year</code></a>, <a href="#val-month"><code>month</code></a>, <a href="#val-day"><code>day</code></a>, <a href="#val-hour"><code>hour</code></a>.</p><h3 id="tute_time_zone"><a href="#tute_time_zone" class="anchor"></a>Time zone</h3><p>By now, one nicety should be obvious: you don't have to worry about what is the time zone offset at when and where - Timedesc takes care of that for you properly! All you have to do is to make a time zone following the *nix naming convention. However, even though we follow the same naming convention, we don't actually rely on the OS time zone database, and our code will run fine on any platform.</p><p>To see what time zones Timedesc supports during run time, we can refer to <a href="Time_zone/index.html#val-available_time_zones"><code>Time_zone.available_time_zones</code></a>. Alternatively, for a text file containing all the supported time zones by default, refer to <a href="https://github.com/daypack-dev/timere/blob/main/gen-artifacts/available-time-zones.txt"><code>available-time-zones.txt</code></a> in the repository.</p><p>If you are aware of DST: Yes, Timedesc takes care of that for you properly as well - Timedesc does not allow you to construct a date time that does not exist for the particular time zone, and any ambiguity is made explicit as return type via <a href="#type-local_result"><code>local_result</code></a>.</p><p>This does mean Timedesc does not &quot;resolve&quot; the result into one of the possibilities arbitrarily, and you need to resolve the ambiguity yourself. If such a coercion is desirable, however, then you can use either <a href="#val-min_of_local_result"><code>min_of_local_result</code></a> or <a href="#val-max_of_local_result"><code>max_of_local_result</code></a>.</p><h3 id="span/duration"><a href="#span/duration" class="anchor"></a>Span/duration</h3><p>Timedesc offers both machine-friendly and human-friendly ways of dealing with spans.</p><p>For the machine-friendly side, functions in the top level of <a href="Span/index.html"><code>Span</code></a> provide efficient constructions and arithmetic operations.</p><p>For the human-friendly side, <a href="Span/For_human/index.html"><code>Span.For_human</code></a> provides functions which work at a level closer to human language. For instance, we say things like &quot;2 hours and 15 minutes&quot; quite frequently, to represent this as <a href="Span/index.html#type-t"><code>Span.t</code></a>, we can do:</p><p><code>Timedesc.Span.For_human.make_exn ~hours:2 ~minutes:15 ()</code></p><p>And in the case of fractional descriptions, such as &quot;1.5 hours&quot;, we can do:</p><p><code>Timedesc.Span.For_human.make_frac_exn ~hours:1.5 ()</code></p><p>Finally, to access the human friendly &quot;view&quot;, we can use <a href="Span/For_human/index.html#type-view"><code>Span.For_human.view</code></a>.</p><h3 id="using-both-ptime-and-timedesc"><a href="#using-both-ptime-and-timedesc" class="anchor"></a>Using both Ptime and Timedesc</h3><p>Ptime is a (very) commonly used package in projects due to being very portable, and robust. However, it lacks certain features which Timedesc provides, such as first class support for time zones, support for different date systems. As such one may wish to use both Ptime and Timedesc, especially if Ptime is already being used for a particular project.</p><p>To facilitate such use of both Ptime and Timedesc, utilities for converting to and from Ptime types are available as:</p><ul><li><a href="Utils/index.html#val-ptime_span_of_span"><code>Utils.ptime_span_of_span</code></a></li><li><a href="Utils/index.html#val-ptime_of_timestamp"><code>Utils.ptime_of_timestamp</code></a></li><li><a href="Utils/index.html#val-span_of_ptime_span"><code>Utils.span_of_ptime_span</code></a></li><li><a href="Utils/index.html#val-timestamp_of_ptime"><code>Utils.timestamp_of_ptime</code></a></li></ul><p>Note that Timedesc only supports nanosecond precision, while Ptime supports picosecond precision. If subnanosecond precision is a concern for you, then the above functions are not suitable.</p><h2 id="advanced-usage"><a href="#advanced-usage" class="anchor"></a>Advanced usage</h2><h3 id="unambiguous-date-time"><a href="#unambiguous-date-time" class="anchor"></a>Unambiguous date time</h3><p>Occasionally, we receive date times which carry both the time zone and the exact offset from UTC. Naturally we can discard the time zone since the offset alone suffices in deducing the precise timestamp. However, we can actually ask Timedesc to digest both via <a href="#val-make_unambiguous"><code>make_unambiguous</code></a>, which checks the offset against the time zone record to make sure it is actually a possible offset.</p><h3 id="other-calendar-systems"><a href="#other-calendar-systems" class="anchor"></a>Other calendar systems</h3><p>Other than Gregorian calendar, Timedesc also supports ISO week date and ISO ordinal date.</p><p>To construct date time in the alternative systems, we can use constructors such as <a href="ISO_week_date_time/index.html#val-make"><code>ISO_week_date_time.make</code></a> and <a href="ISO_ord_date_time/index.html#val-make"><code>ISO_ord_date_time.make</code></a>.</p><p>Then to access the representation in the alternative date systems, we can use accessors such as <a href="#val-iso_week"><code>iso_week</code></a>, and <a href="#val-day_of_year"><code>day_of_year</code></a>.</p><h3 id="using-date-by-itself"><a href="#using-date-by-itself" class="anchor"></a>Using date by itself</h3><p>Sometimes we are only interested in the date component rather than both date and time. We can use <a href="Date/index.html"><code>Date</code></a> module in this case.</p><p>To construct a Gregorian calendar date, we can use <code>Date</code>.Ymd_date.make. To construct ISO week date and ISO ordinal date, we can use <a href="Date/ISO_week_date/index.html#val-make"><code>Date.ISO_week_date.make</code></a> and <a href="Date/ISO_ord/index.html"><code>Date.ISO_ord</code></a> respectively.</p><p>We have similar set of accessors for accessing values of <a href="Date/index.html#type-t"><code>Date.t</code></a>, such as <a href="Date/index.html#val-year"><code>Date.year</code></a>, <a href="Date/index.html#val-iso_week"><code>Date.iso_week</code></a>, <a href="Date/index.html#val-day_of_year"><code>Date.day_of_year</code></a>.</p><p>To obtain a &quot;view&quot; (in a manner similar to the human-friendly &quot;view&quot; from <a href="Span/For_human/index.html"><code>Span.For_human</code></a>), we can use <a href="Date/ISO_week_date/index.html#type-view"><code>Date.ISO_week_date.view</code></a> and <a href="Date/ISO_ord/index.html#type-view"><code>Date.ISO_ord.view</code></a>.</p><h2 id="further-reading"><a href="#further-reading" class="anchor"></a>Further reading</h2><h3 id="misconceptions"><a href="#misconceptions" class="anchor"></a>Misconceptions</h3><ul><li>Time zone offsets are always in hours</li><li>What we typically consider a time zone, e.g. &quot;Europe/Paris&quot;, always has a constant offset</li><li>With a time zone and a specific date time, we can always obtain a unique &quot;unix timestamp&quot; (time since unix epoch)</li><li>We can always calculate time zone offset at some date time, and apply it universally for any other date time in the same time zone</li><li>Many more on various online resources...</li></ul><h3 id="time-zone,-time-zone-offset,-and-date-time"><a href="#time-zone,-time-zone-offset,-and-date-time" class="anchor"></a>Time zone, time zone offset, and date time</h3><p>It is tempting to think that a time zone maps cleanly to a constant offset, and indeed we may define time zone as such, e.g. UTC+1, UTC-10, but this is far from what we mean in everyday context.</p><p>Very often, what we consider to be time zone actually represents a table which records what offset to use in which period, which we index/refer to by geographical names like &quot;Europe/Paris&quot;, &quot;Australia/Sydney&quot;. These tables are defined by governmental bodies, and attributes of the table, such as offset of any particular period, start and end of any particular period, may not show any observable pattern.</p><p>Thus it is not uncommon to see date time errors arising from attempts of applying some formulas universally, which might work well for a lot of cases in contemporary time periods, but fail for some combinations.</p><p>We make explicit of above explanation by considering &quot;Europe/Paris&quot; as an example, which observes a common form of transition called Daylight Saving Time (DST).</p><p>When DST starts (usually in March), the clocks &quot;jump forward&quot; by 1 hour, usually jumping from 2am to 3am, leading 2am to 3am (exclusive) to become non-existent.</p><p>Indeed we can observe the lack of continuity of Europe/Paris timeline below (UTC timeline is always continuous):</p><pre>                         Mar
UTC          -------------|-------------
                         1am

Europe/Paris -------------|-------------
                       2am 3am
                      (+1) (+2)</pre><p>Paris time zone offset also changes from UTC+1 to UTC+2.</p><p>When DST ends (usually in Oct), clocks &quot;jump backward&quot; by 1 hour, usually jumping from 3am to 2am, leading to 2am to 3am (exclusive) becoming duplicated:</p><pre>                         Oct
UTC          -------------|-------------
                         1am

Europe/Paris -------------|-------------
                       3am 2am
                      (+2) (+1)</pre><p>Paris time zone offset also changes from UTC+2 to UTC+1.</p><p>Another way of looking at above is when DST is in effect, Paris observes UTC+2, and UTC+1 otherwise:</p><pre>                          |-------------DST on------------|
             |---DST off--|                               |---DST off--|

                         Mar                             Oct
UTC          -------------|------------- ... -------------|-------------
                         1am                             1am

Europe/Paris -------------|------------- ... -------------|-------------
                       2am 3am                         3am 2am
                      (+1) (+2)                       (+2) (+1)</pre><p>This start and end of the DST on and off periods, along with the corresponding offsets, form the basis of the table we mentioned above.</p><h3 id="timedesc-date-time-api-behaviour-highlights"><a href="#timedesc-date-time-api-behaviour-highlights" class="anchor"></a>Timedesc date time API behaviour highlights</h3><p>We highlight some critical cases in practice, and how Timedesc behaves and how it may differ from other libraries.</p><p>Take year 2021 for example, DST starts on 2021 Mar 28 for Paris, causing clocks to jump from 2am to 3am. Pick any intermediate point, say 2:30am, we yield an undefined date time. In this case, Timedesc refuses the construction of such <a href="#type-t"><code>t</code></a> in <a href="#val-make"><code>make</code></a> etc, while some libraries coerce the result into 3:30am.</p><p>And DST ends on 2021 Oct 31, causing clocks to jump from 3am to 2am. Say we pick 2:30am again, we are actually pointing at <em>two</em> time points (there are two 2:30am) unless we make an explicit selection between the first or second occurance. Whenever ambiguity of this form is a possiblity for the result of a function, say <a href="#val-to_timestamp"><code>to_timestamp</code></a>, Timedesc uses <a href="#type-local_result"><code>local_result</code></a> variant type, of which <code>`Single _</code> indicates lack of ambiguity for the particular result, and <code>`Ambiguous _</code> indicates the result is ambiguous.</p><p>Some other libraries coerce the ambiguous result into one of the two possible choices (which exact one may not be guaranteed). If user wishes to do similar coercions, they may use <a href="#val-min_of_local_result"><code>min_of_local_result</code></a> or <a href="#val-max_of_local_result"><code>max_of_local_result</code></a>.</p><p>For constructions, <a href="#val-make"><code>make</code></a> yields a possibly ambiguous construction, while <a href="#val-make_unambiguous"><code>make_unambiguous</code></a> yields an unambiguous construction. In general, if you are provided with the exact offset to UTC, then <code>make_unambiguous</code> is the better choice.</p><h2 id="basic-exceptions"><a href="#basic-exceptions" class="anchor"></a>Basic exceptions</h2><div class="odoc-spec"><div class="spec exception" id="exception-Invalid_format_string" class="anchored"><a href="#exception-Invalid_format_string" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Invalid_format_string</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>Printing exception</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-ISO8601_parse_exn" class="anchored"><a href="#exception-ISO8601_parse_exn" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">ISO8601_parse_exn</span> <span class="keyword">of</span> string</span></code></div></div><h2 id="basic-types"><a href="#basic-types" class="anchor"></a>Basic types</h2><div class="odoc-spec"><div class="spec type" id="type-weekday" class="anchored"><a href="#type-weekday" class="anchor"></a><code><span><span class="keyword">type</span> weekday</span><span> = </span><span>[ </span></code><table><tr id="type-weekday.Sun" class="anchored"><td class="def constructor"><a href="#type-weekday.Sun" class="anchor"></a><code><span>| </span></code><code><span>`Sun</span></code></td></tr><tr id="type-weekday.Mon" class="anchored"><td class="def constructor"><a href="#type-weekday.Mon" class="anchor"></a><code><span>| </span></code><code><span>`Mon</span></code></td></tr><tr id="type-weekday.Tue" class="anchored"><td class="def constructor"><a href="#type-weekday.Tue" class="anchor"></a><code><span>| </span></code><code><span>`Tue</span></code></td></tr><tr id="type-weekday.Wed" class="anchored"><td class="def constructor"><a href="#type-weekday.Wed" class="anchor"></a><code><span>| </span></code><code><span>`Wed</span></code></td></tr><tr id="type-weekday.Thu" class="anchored"><td class="def constructor"><a href="#type-weekday.Thu" class="anchor"></a><code><span>| </span></code><code><span>`Thu</span></code></td></tr><tr id="type-weekday.Fri" class="anchored"><td class="def constructor"><a href="#type-weekday.Fri" class="anchor"></a><code><span>| </span></code><code><span>`Fri</span></code></td></tr><tr id="type-weekday.Sat" class="anchored"><td class="def constructor"><a href="#type-weekday.Sat" class="anchor"></a><code><span>| </span></code><code><span>`Sat</span></code></td></tr></table><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-local_result" class="anchored"><a href="#type-local_result" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a local_result</span></span><span> = </span><span>[ </span></code><table><tr id="type-local_result.Single" class="anchored"><td class="def constructor"><a href="#type-local_result.Single" class="anchor"></a><code><span>| </span></code><code><span>`Single <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr><tr id="type-local_result.Ambiguous" class="anchored"><td class="def constructor"><a href="#type-local_result.Ambiguous" class="anchor"></a><code><span>| </span></code><code><span>`Ambiguous <span class="keyword">of</span> <span class="type-var">'a</span> * <span class="type-var">'a</span></span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Result for when a local date time may be involved, e.g. using a date time with no precise time zone offset attached.</p><ul><li><code>`Single</code> is yielded when the date time maps to exactly one <code>'a</code>. This happens when date time carries an accurate offset, or when the date time is not affected by any offset shifts (thus an accurate offset can be inferred).</li><li><code>`Ambiguous</code> is yielded when date time maps to more than one (exactly two) <code>'a</code>. This happens when DST ends and &quot;goes back an hour&quot; for instance.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-min_of_local_result" class="anchored"><a href="#val-min_of_local_result" class="anchor"></a><code><span><span class="keyword">val</span> min_of_local_result : <span><span><span class="type-var">'a</span> <a href="#type-local_result">local_result</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>For <code>min_of_local_result x</code></p><ul><li>if <code>x = `Single a</code>, yields <code>a</code>,</li><li>if <code>x = `Ambiguous (a, b)</code>, yields <code>a</code>,</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-max_of_local_result" class="anchored"><a href="#val-max_of_local_result" class="anchor"></a><code><span><span class="keyword">val</span> max_of_local_result : <span><span><span class="type-var">'a</span> <a href="#type-local_result">local_result</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>For <code>max_of_local_result x</code></p><ul><li>if <code>x = `Single a</code>, yields <code>a</code>,</li><li>if <code>x = `Ambiguous (a, b)</code>, yields <code>b</code>,</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-equal_local_result" class="anchored"><a href="#val-equal_local_result" class="anchor"></a><code><span><span class="keyword">val</span> equal_local_result : 
  <span>eq:<span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-local_result">local_result</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-local_result">local_result</a></span> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div></div><h2 id="span"><a href="#span" class="anchor"></a>Span</h2><div class="odoc-spec"><div class="spec module" id="module-Span" class="anchored"><a href="#module-Span" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Span/index.html">Span</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-timestamp" class="anchored"><a href="#type-timestamp" class="anchor"></a><code><span><span class="keyword">type</span> timestamp</span><span> = <a href="Span/index.html#type-t">Span.t</a></span></code></div><div class="spec-doc"><p>Definition of timestamp throughout the library follows the &quot;seconds since unix epoch&quot; definition</p></div></div><h2 id="date-time-components"><a href="#date-time-components" class="anchor"></a>Date time components</h2><h3 id="partial-date"><a href="#partial-date" class="anchor"></a>Partial date</h3><p>Implementation of:</p><ul><li>Gregorian year month (<a href="Ym/index.html"><code>Ym</code></a>)</li><li>ISO week (<a href="ISO_week/index.html"><code>ISO_week</code></a>)</li></ul><div class="odoc-spec"><div class="spec module" id="module-Ym" class="anchored"><a href="#module-Ym" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Ym/index.html">Ym</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-ISO_week" class="anchored"><a href="#module-ISO_week" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ISO_week/index.html">ISO_week</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="date"><a href="#date" class="anchor"></a>Date</h3><p>Implementation of date in:</p><ul><li>Gregorian calendar (<a href="Date/Ymd/index.html"><code>Date.Ymd</code></a>)</li><li>ISO week date calendar (<a href="Date/ISO_week_date/index.html"><code>Date.ISO_week_date</code></a>)</li><li>ISO ordinal date calendar (<a href="Date/ISO_ord/index.html"><code>Date.ISO_ord</code></a>)</li></ul><div class="odoc-spec"><div class="spec module" id="module-Date" class="anchored"><a href="#module-Date" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Date/index.html">Date</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="time"><a href="#time" class="anchor"></a>Time</h3><p>Implementation of time of day with nanosecond precision</p><div class="odoc-spec"><div class="spec module" id="module-Time" class="anchored"><a href="#module-Time" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Time/index.html">Time</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="time-zone"><a href="#time-zone" class="anchor"></a>Time zone</h3><p>Implementation of time zone which uses IANA time zone database underneath</p><div class="odoc-spec"><div class="spec module" id="module-Time_zone" class="anchored"><a href="#module-Time_zone" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Time_zone/index.html">Time_zone</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="date-time"><a href="#date-time" class="anchor"></a>Date time</h2><p>Implementation of time zone aware date time in:</p><ul><li>Gregorian calendar (top level of current module)</li><li>ISO week date calendar (<a href="ISO_week_date_time/index.html"><code>ISO_week_date_time</code></a>)</li><li>ISO ordinal date calendar (<a href="ISO_ord_date_time/index.html"><code>ISO_ord_date_time</code></a>)</li></ul><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>This is the main type, and represents a point in the local timeline with respect to the residing time zone. Conceptually a triple of &quot;date&quot;, &quot;time&quot; (or &quot;time of day&quot;), and time zone.</p><p>A <code>t</code> always maps to at least one point on the UTC timeline, and <code>make</code> fails if this is not the case. <code>t</code> may also map to two points on the UTC timeline in the case of DST and without an unambiguous offset, however.</p><p>In the ambiguous case, functions which return <code>_ local_result</code> will yield an <code>`Ambiguous _</code> value, and <code>`Single _</code> otherwise.</p><p><code>ns</code> may be <code>&gt;= 10^9</code> to represent leap second, but always remains <code>&lt; 2 * 10^9</code>.</p><p><code>s</code> is always <code>&gt;= 0</code> and <code>&lt; 60</code>, even when second 60 is used during construction. In other words, second 60 is represented via <code>ns</code> field.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-error" class="anchored"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = </span><span>[ </span></code><table><tr id="type-error.Does_not_exist" class="anchored"><td class="def constructor"><a href="#type-error.Does_not_exist" class="anchor"></a><code><span>| </span></code><code><span>`Does_not_exist</span></code></td></tr><tr id="type-error.Invalid_year" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_year" class="anchor"></a><code><span>| </span></code><code><span>`Invalid_year <span class="keyword">of</span> int</span></code></td></tr><tr id="type-error.Invalid_month" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_month" class="anchor"></a><code><span>| </span></code><code><span>`Invalid_month <span class="keyword">of</span> int</span></code></td></tr><tr id="type-error.Invalid_day" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_day" class="anchor"></a><code><span>| </span></code><code><span>`Invalid_day <span class="keyword">of</span> int</span></code></td></tr><tr id="type-error.Invalid_hour" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_hour" class="anchor"></a><code><span>| </span></code><code><span>`Invalid_hour <span class="keyword">of</span> int</span></code></td></tr><tr id="type-error.Invalid_minute" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_minute" class="anchor"></a><code><span>| </span></code><code><span>`Invalid_minute <span class="keyword">of</span> int</span></code></td></tr><tr id="type-error.Invalid_second" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_second" class="anchor"></a><code><span>| </span></code><code><span>`Invalid_second <span class="keyword">of</span> int</span></code></td></tr><tr id="type-error.Invalid_s_frac" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_s_frac" class="anchor"></a><code><span>| </span></code><code><span>`Invalid_s_frac <span class="keyword">of</span> float</span></code></td></tr><tr id="type-error.Invalid_ns" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_ns" class="anchor"></a><code><span>| </span></code><code><span>`Invalid_ns <span class="keyword">of</span> int</span></code></td></tr><tr id="type-error.Invalid_tz_info" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_tz_info" class="anchor"></a><code><span>| </span></code><code><span>`Invalid_tz_info <span class="keyword">of</span> <span>string option</span> * <a href="Span/index.html#type-t">Span.t</a></span></code></td></tr></table><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Error_exn" class="anchored"><a href="#exception-Error_exn" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Error_exn</span> <span class="keyword">of</span> <a href="#type-error">error</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-string_of_error" class="anchored"><a href="#val-string_of_error" class="anchor"></a><code><span><span class="keyword">val</span> string_of_error : <span><a href="#type-error">error</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><h3 id="constructors_6"><a href="#constructors_6" class="anchor"></a>Constructors</h3><div class="odoc-spec"><div class="spec value" id="val-make" class="anchored"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : 
  <span>?tz:<a href="Time_zone/index.html#type-t">Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?ns:int <span class="arrow">&#45;&gt;</span></span>
  <span>?s_frac:float <span class="arrow">&#45;&gt;</span></span>
  <span>year:int <span class="arrow">&#45;&gt;</span></span>
  <span>month:int <span class="arrow">&#45;&gt;</span></span>
  <span>day:int <span class="arrow">&#45;&gt;</span></span>
  <span>hour:int <span class="arrow">&#45;&gt;</span></span>
  <span>minute:int <span class="arrow">&#45;&gt;</span></span>
  <span>second:int <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <a href="#type-t">t</a>, <a href="#type-error">error</a> )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Constructs a date time providing only a time zone (defaults to local time zone).</p><p>A precise offset is inferred if possible.</p><p>Note that this may yield a ambiguous date time if the time zone has varying offsets, causing a local date time to appear twice, e.g. countries with DST.</p><p>See <a href="#val-make_unambiguous"><code>make_unambiguous</code></a> for the more precise construction.</p><p>See <code>Date</code>.Ymd_date.make for error handling of date specification.</p><p>See <a href="Time/index.html#val-make"><code>Time.make</code></a> for error handling of time of day specification.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make_exn" class="anchored"><a href="#val-make_exn" class="anchor"></a><code><span><span class="keyword">val</span> make_exn : 
  <span>?tz:<a href="Time_zone/index.html#type-t">Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?ns:int <span class="arrow">&#45;&gt;</span></span>
  <span>?s_frac:float <span class="arrow">&#45;&gt;</span></span>
  <span>year:int <span class="arrow">&#45;&gt;</span></span>
  <span>month:int <span class="arrow">&#45;&gt;</span></span>
  <span>day:int <span class="arrow">&#45;&gt;</span></span>
  <span>hour:int <span class="arrow">&#45;&gt;</span></span>
  <span>minute:int <span class="arrow">&#45;&gt;</span></span>
  <span>second:int <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Error_exn</span> <p>if <code>make</code> fails</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-make_unambiguous" class="anchored"><a href="#val-make_unambiguous" class="anchor"></a><code><span><span class="keyword">val</span> make_unambiguous : 
  <span>?tz:<a href="Time_zone/index.html#type-t">Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?ns:int <span class="arrow">&#45;&gt;</span></span>
  <span>?s_frac:float <span class="arrow">&#45;&gt;</span></span>
  <span>year:int <span class="arrow">&#45;&gt;</span></span>
  <span>month:int <span class="arrow">&#45;&gt;</span></span>
  <span>day:int <span class="arrow">&#45;&gt;</span></span>
  <span>hour:int <span class="arrow">&#45;&gt;</span></span>
  <span>minute:int <span class="arrow">&#45;&gt;</span></span>
  <span>second:int <span class="arrow">&#45;&gt;</span></span>
  <span>offset_from_utc:<a href="Span/index.html#type-t">Span.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <a href="#type-t">t</a>, <a href="#type-error">error</a> )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Constructs a date time providing time zone offset (offset from UTC), and optionally a time zone. As an example, for &quot;UTC+1&quot;, you would give a duration of positive 1 hour for <code>offset_from_utc</code>.</p><p>Subsecond value of <code>offset_from_utc</code> is ignored.</p><p>Nanosecond used is the addition of <code>ns</code> and <code>s_frac * 10^9</code>.</p><p>If a time zone is provided, then <code>offset_from_utc</code> is checked against the time zone record, and returns <code>Error `Invalid_tz_info</code> if <code>offset_from_utc</code> is not a possible offset for the particular date time in said time zone.</p><p>Otherwise same leap second handling and error handling as <code>make</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make_unambiguous_exn" class="anchored"><a href="#val-make_unambiguous_exn" class="anchor"></a><code><span><span class="keyword">val</span> make_unambiguous_exn : 
  <span>?tz:<a href="Time_zone/index.html#type-t">Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?ns:int <span class="arrow">&#45;&gt;</span></span>
  <span>?s_frac:float <span class="arrow">&#45;&gt;</span></span>
  <span>year:int <span class="arrow">&#45;&gt;</span></span>
  <span>month:int <span class="arrow">&#45;&gt;</span></span>
  <span>day:int <span class="arrow">&#45;&gt;</span></span>
  <span>hour:int <span class="arrow">&#45;&gt;</span></span>
  <span>minute:int <span class="arrow">&#45;&gt;</span></span>
  <span>second:int <span class="arrow">&#45;&gt;</span></span>
  <span>offset_from_utc:<a href="Span/index.html#type-t">Span.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Error_exn</span> <p>if <code>make_umabiguous</code> fails</p></li></ul></div></div><h3 id="accessors_6"><a href="#accessors_6" class="anchor"></a>Accessors</h3><div class="odoc-spec"><div class="spec value" id="val-date" class="anchored"><a href="#val-date" class="anchor"></a><code><span><span class="keyword">val</span> date : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Date/index.html#type-t">Date.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-ymd_date" class="anchored"><a href="#val-ymd_date" class="anchor"></a><code><span><span class="keyword">val</span> ymd_date : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Date/Ymd/index.html#type-view">Date.Ymd.view</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-iso_week_date" class="anchored"><a href="#val-iso_week_date" class="anchor"></a><code><span><span class="keyword">val</span> iso_week_date : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Date/ISO_week_date/index.html#type-view">Date.ISO_week_date.view</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-iso_ord_date" class="anchored"><a href="#val-iso_ord_date" class="anchor"></a><code><span><span class="keyword">val</span> iso_ord_date : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Date/ISO_ord/index.html#type-view">Date.ISO_ord.view</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-ym" class="anchored"><a href="#val-ym" class="anchor"></a><code><span><span class="keyword">val</span> ym : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Ym/index.html#type-t">Ym.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-year" class="anchored"><a href="#val-year" class="anchor"></a><code><span><span class="keyword">val</span> year : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-month" class="anchored"><a href="#val-month" class="anchor"></a><code><span><span class="keyword">val</span> month : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-day" class="anchored"><a href="#val-day" class="anchor"></a><code><span><span class="keyword">val</span> day : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-iso_week" class="anchored"><a href="#val-iso_week" class="anchor"></a><code><span><span class="keyword">val</span> iso_week : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="ISO_week/index.html#type-t">ISO_week.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-iso_year" class="anchored"><a href="#val-iso_year" class="anchor"></a><code><span><span class="keyword">val</span> iso_year : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-weekday" class="anchored"><a href="#val-weekday" class="anchor"></a><code><span><span class="keyword">val</span> weekday : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-weekday">weekday</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-day_of_year" class="anchored"><a href="#val-day_of_year" class="anchor"></a><code><span><span class="keyword">val</span> day_of_year : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-time" class="anchored"><a href="#val-time" class="anchor"></a><code><span><span class="keyword">val</span> time : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Time/index.html#type-t">Time.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-time_view" class="anchored"><a href="#val-time_view" class="anchor"></a><code><span><span class="keyword">val</span> time_view : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Time/index.html#type-view">Time.view</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-hour" class="anchored"><a href="#val-hour" class="anchor"></a><code><span><span class="keyword">val</span> hour : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-minute" class="anchored"><a href="#val-minute" class="anchor"></a><code><span><span class="keyword">val</span> minute : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-second" class="anchored"><a href="#val-second" class="anchor"></a><code><span><span class="keyword">val</span> second : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-ns" class="anchored"><a href="#val-ns" class="anchor"></a><code><span><span class="keyword">val</span> ns : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-is_leap_second" class="anchored"><a href="#val-is_leap_second" class="anchor"></a><code><span><span class="keyword">val</span> is_leap_second : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tz" class="anchored"><a href="#val-tz" class="anchor"></a><code><span><span class="keyword">val</span> tz : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Time_zone/index.html#type-t">Time_zone.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-offset_from_utc" class="anchored"><a href="#val-offset_from_utc" class="anchor"></a><code><span><span class="keyword">val</span> offset_from_utc : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Span/index.html#type-t">Span.t</a> <a href="#type-local_result">local_result</a></span></span></code></div></div><h3 id="conversion_3"><a href="#conversion_3" class="anchor"></a>Conversion</h3><div class="odoc-spec"><div class="spec value" id="val-to_timestamp" class="anchored"><a href="#val-to_timestamp" class="anchor"></a><code><span><span class="keyword">val</span> to_timestamp : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-timestamp">timestamp</a> <a href="#type-local_result">local_result</a></span></span></code></div><div class="spec-doc"><p><code>to_timestamp</code> loses information about leap second</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_timestamp_single" class="anchored"><a href="#val-to_timestamp_single" class="anchor"></a><code><span><span class="keyword">val</span> to_timestamp_single : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-timestamp">timestamp</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if <code>to_timestamp</code> does not yield a <code>`Single</code> result</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-to_timestamp_float_s" class="anchored"><a href="#val-to_timestamp_float_s" class="anchor"></a><code><span><span class="keyword">val</span> to_timestamp_float_s : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <a href="#type-local_result">local_result</a></span></span></code></div><div class="spec-doc"><p>Returns timestamp in seconds, fraction represent</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_timestamp_float_s_single" class="anchored"><a href="#val-to_timestamp_float_s_single" class="anchor"></a><code><span><span class="keyword">val</span> to_timestamp_float_s_single : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if <code>to_timestamp_float_s</code> does not yield a <code>`Single</code> result</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-of_timestamp" class="anchored"><a href="#val-of_timestamp" class="anchor"></a><code><span><span class="keyword">val</span> of_timestamp : <span>?tz_of_date_time:<a href="Time_zone/index.html#type-t">Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-timestamp">timestamp</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_timestamp_exn" class="anchored"><a href="#val-of_timestamp_exn" class="anchor"></a><code><span><span class="keyword">val</span> of_timestamp_exn : <span>?tz_of_date_time:<a href="Time_zone/index.html#type-t">Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-timestamp">timestamp</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_timestamp_float_s" class="anchored"><a href="#val-of_timestamp_float_s" class="anchor"></a><code><span><span class="keyword">val</span> of_timestamp_float_s : <span>?tz_of_date_time:<a href="Time_zone/index.html#type-t">Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_timestamp_float_s_exn" class="anchored"><a href="#val-of_timestamp_float_s_exn" class="anchor"></a><code><span><span class="keyword">val</span> of_timestamp_float_s_exn : <span>?tz_of_date_time:<a href="Time_zone/index.html#type-t">Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><h3 id="comparison_6"><a href="#comparison_6" class="anchor"></a>Comparison</h3><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-compare_chrono_min" class="anchored"><a href="#val-compare_chrono_min" class="anchor"></a><code><span><span class="keyword">val</span> compare_chrono_min : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Compare based on ordering of <code>min_of_local_result @@ to_timestamp _</code></p><p><b>Warning</b>: <code>compare_chrono_min x y = 0</code> does not imply <code>equal x y</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-compare_chrono_max" class="anchored"><a href="#val-compare_chrono_max" class="anchor"></a><code><span><span class="keyword">val</span> compare_chrono_max : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Compare based on ordering of <code>max_of_local_result @@ to_timestamp _</code></p><p><b>Warning</b>: <code>compare_chrono_max x y = 0</code> does not imply <code>equal x y</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-compare_struct" class="anchored"><a href="#val-compare_struct" class="anchor"></a><code><span><span class="keyword">val</span> compare_struct : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Structural comparison, <code>compare_struct x y = 0</code> implies <code>equal x y</code></p><p>Ordering does not correspond to chronological ordering</p></div></div><h3 id="constants_2"><a href="#constants_2" class="anchor"></a>Constants</h3><div class="odoc-spec"><div class="spec value" id="val-min_val" class="anchored"><a href="#val-min_val" class="anchor"></a><code><span><span class="keyword">val</span> min_val : <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-max_val" class="anchored"><a href="#val-max_val" class="anchor"></a><code><span><span class="keyword">val</span> max_val : <a href="#type-t">t</a></span></code></div></div><h3 id="now"><a href="#now" class="anchor"></a>Now</h3><div class="odoc-spec"><div class="spec value" id="val-now" class="anchored"><a href="#val-now" class="anchor"></a><code><span><span class="keyword">val</span> now : <span>?tz_of_date_time:<a href="Time_zone/index.html#type-t">Time_zone.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><h3 id="pretty-printing_10"><a href="#pretty-printing_10" class="anchor"></a>Pretty printing</h3><div class="odoc-spec"><div class="spec exception" id="exception-Date_time_cannot_deduce_offset_from_utc" class="anchored"><a href="#exception-Date_time_cannot_deduce_offset_from_utc" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Date_time_cannot_deduce_offset_from_utc</span> <span class="keyword">of</span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pp" class="anchored"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span>?format:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty printing for date time.</p><p>Default format string:</p><pre>{year} {mon:Xxx} {day:0X} {hour:0X}:{min:0X}:{sec:0X}{sec-frac:.} \
{tzoff-sign}{tzoff-hour:0X}:{tzoff-min:0X}:{tzoff-sec:0X}</pre><p>Format string specification:</p><pre>{{               literal {
{year}           year
{mon:Xxx}        abbreviated month name (e.g. Jan), casing of 'x' controls the casing
{mon:Xx*}        full month name (e.g. January), casing of first 'x' controls casing of first letter,
                 casing of second 'x' controls casing of following letters
{mon:cX}         month in number form (e.g. 01) character 'c' before 'X' is used for padding
                 (leave out character for no padding)
{day:cX}         month day (e.g.  1) character 'c' before 'X' is used for padding
                 (leave out character for no padding)
{wday:Xxx}       abbreviated weekday name (e.g. Sun), the casing of 'x' controls the casing
{wday:Xx*}       full weekday name (e.g. Sunday), casing of first 'x' controls casing of first letter,
                 casing of second 'x' controls casing of following letters
{hour:cX}        hour in 24-hour format, character 'c' before 'X' determines padding
                 (leave out character for no padding)
{12hour:cX}      hour in 12-hour format, character 'c' before 'X' determines padding
                 (leave out character for no padding)
{min:cX}         minute, character 'c' before 'X' determines padding
                 (leave out character for no padding)
{sec:cX}         second, character 'c' before 'X' determines padding
                 (leave out character for no padding)
{ns}             nanosecond
{sec-frac:cN}    fraction of second
                 character c is used as the decimal separator
                 N determines the number of digits to take after decimal separator
                 if N is not specified, then the smallest number of digits required
                 after decimal separator for a lossless representation is used
                 result is truncated to said number of digits
{tzoff-sign}     time zone offset sign ('+' or '-')
                 raises Date_time_cannot_deduce_offset_from_utc if time zone offset cannot be calculated
{tzoff-hour:cX}  time zone offset hour, follows same padding rule as &quot;{hour:cX}&quot;
                 raises Date_time_cannot_deduce_offset_from_utc if time zone offset cannot be calculated
{tzoff-min:cX}   time zone offset minute, follows same padding rule as &quot;{min:cX}&quot;
                 raises Date_time_cannot_deduce_offset_from_utc if time zone offset cannot be calculated
{tzoff-sec:cX}   time zone offset second, follows same padding rule as &quot;{sec:cX}&quot;
                 raises Date_time_cannot_deduce_offset_from_utc if time zone offset cannot be calculated</pre></div></div><div class="odoc-spec"><div class="spec value" id="val-to_string" class="anchored"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span>?format:string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>String conversion using <code>pp</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Date_time_cannot_deduce_offset_from_utc</span> <p>if time zone offset cannot be calculated</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_rfc3339" class="anchored"><a href="#val-pp_rfc3339" class="anchor"></a><code><span><span class="keyword">val</span> pp_rfc3339 : <span>?frac_s:int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty prints according to RFC3339, e.g. <code>2020-01-20T13:00:00.0001+10</code>.</p><p><code>frac_s</code> defaults to as many digits as required for a lossless representation.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if <code>frac_s &lt; 0 || frac_s &gt; 9</code></p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Date_time_cannot_deduce_offset_from_utc</span> <p>if time zone offset cannot be calculated</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_rfc3339_milli" class="anchored"><a href="#val-pp_rfc3339_milli" class="anchor"></a><code><span><span class="keyword">val</span> pp_rfc3339_milli : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_rfc3339_micro" class="anchored"><a href="#val-pp_rfc3339_micro" class="anchor"></a><code><span><span class="keyword">val</span> pp_rfc3339_micro : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_rfc3339_nano" class="anchored"><a href="#val-pp_rfc3339_nano" class="anchor"></a><code><span><span class="keyword">val</span> pp_rfc3339_nano : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_rfc3339" class="anchored"><a href="#val-to_rfc3339" class="anchor"></a><code><span><span class="keyword">val</span> to_rfc3339 : <span>?frac_s:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>String conversion using <code>pp_rfc3339</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Date_time_cannot_deduce_offset_from_utc</span> <p>if time zone offset cannot be calculated</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-to_rfc3339_milli" class="anchored"><a href="#val-to_rfc3339_milli" class="anchor"></a><code><span><span class="keyword">val</span> to_rfc3339_milli : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_rfc3339_micro" class="anchored"><a href="#val-to_rfc3339_micro" class="anchor"></a><code><span><span class="keyword">val</span> to_rfc3339_micro : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_rfc3339_nano" class="anchored"><a href="#val-to_rfc3339_nano" class="anchor"></a><code><span><span class="keyword">val</span> to_rfc3339_nano : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_iso8601" class="anchored"><a href="#val-pp_iso8601" class="anchor"></a><code><span><span class="keyword">val</span> pp_iso8601 : <span>?frac_s:int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Alias to <code>pp_rfc3339</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_iso8601_milli" class="anchored"><a href="#val-pp_iso8601_milli" class="anchor"></a><code><span><span class="keyword">val</span> pp_iso8601_milli : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_iso8601_micro" class="anchored"><a href="#val-pp_iso8601_micro" class="anchor"></a><code><span><span class="keyword">val</span> pp_iso8601_micro : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_iso8601_nano" class="anchored"><a href="#val-pp_iso8601_nano" class="anchor"></a><code><span><span class="keyword">val</span> pp_iso8601_nano : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_iso8601" class="anchored"><a href="#val-to_iso8601" class="anchor"></a><code><span><span class="keyword">val</span> to_iso8601 : <span>?frac_s:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Alias to <code>to_rfc3339</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_iso8601_milli" class="anchored"><a href="#val-to_iso8601_milli" class="anchor"></a><code><span><span class="keyword">val</span> to_iso8601_milli : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_iso8601_micro" class="anchored"><a href="#val-to_iso8601_micro" class="anchor"></a><code><span><span class="keyword">val</span> to_iso8601_micro : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_iso8601_nano" class="anchored"><a href="#val-to_iso8601_nano" class="anchor"></a><code><span><span class="keyword">val</span> to_iso8601_nano : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><h3 id="parsing_8"><a href="#parsing_8" class="anchor"></a>Parsing</h3><div class="odoc-spec"><div class="spec value" id="val-of_iso8601" class="anchored"><a href="#val-of_iso8601" class="anchor"></a><code><span><span class="keyword">val</span> of_iso8601 : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>( <a href="#type-t">t</a>, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Parses a subset of ISO8601, up to 9 fractional digits for second (nanosecond precision).</p><p>If more than 9 fractional digits are provided, then only the first 9 digits are used, i.e. no rounding.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_iso8601_exn" class="anchored"><a href="#val-of_iso8601_exn" class="anchor"></a><code><span><span class="keyword">val</span> of_iso8601_exn : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">ISO8601_parse_exn</span> <p>if <code>of_iso8601</code> fails</p></li></ul></div></div><h3 id="sexp_4"><a href="#sexp_4" class="anchor"></a>Sexp</h3><div class="odoc-spec"><div class="spec value" id="val-to_sexp" class="anchored"><a href="#val-to_sexp" class="anchor"></a><code><span><span class="keyword">val</span> to_sexp : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-to_sexp_string" class="anchored"><a href="#val-to_sexp_string" class="anchor"></a><code><span><span class="keyword">val</span> to_sexp_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_sexp" class="anchored"><a href="#val-of_sexp" class="anchor"></a><code><span><span class="keyword">val</span> of_sexp : <span><span class="xref-unresolved">Sexplib</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <span><span>( <a href="#type-t">t</a>, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_sexp_string" class="anchored"><a href="#val-of_sexp_string" class="anchor"></a><code><span><span class="keyword">val</span> of_sexp_string : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>( <a href="#type-t">t</a>, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_sexp" class="anchored"><a href="#val-pp_sexp" class="anchor"></a><code><span><span class="keyword">val</span> pp_sexp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><h2 id="timestamp"><a href="#timestamp" class="anchor"></a>Timestamp</h2><div class="odoc-spec"><div class="spec module" id="module-Timestamp" class="anchored"><a href="#module-Timestamp" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Timestamp/index.html">Timestamp</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Timestamp specific functions</p></div></div><h2 id="interval"><a href="#interval" class="anchor"></a>Interval</h2><div class="odoc-spec"><div class="spec module" id="module-Interval" class="anchored"><a href="#module-Interval" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Interval/index.html">Interval</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="time-zone-less-date-time"><a href="#time-zone-less-date-time" class="anchor"></a>Time zone-less date time</h2><div class="odoc-spec"><div class="spec module" id="module-Zoneless" class="anchored"><a href="#module-Zoneless" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Zoneless/index.html">Zoneless</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="other-date-time-systems"><a href="#other-date-time-systems" class="anchor"></a>Other date time systems</h2><div class="odoc-spec"><div class="spec module" id="module-ISO_week_date_time" class="anchored"><a href="#module-ISO_week_date_time" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ISO_week_date_time/index.html">ISO_week_date_time</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-ISO_ord_date_time" class="anchored"><a href="#module-ISO_ord_date_time" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ISO_ord_date_time/index.html">ISO_ord_date_time</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="misc"><a href="#misc" class="anchor"></a>Misc</h2><div class="odoc-spec"><div class="spec module" id="module-Time_zone_info" class="anchored"><a href="#module-Time_zone_info" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Time_zone_info/index.html">Time_zone_info</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Time zone information that can be attached to date time like data</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Utils" class="anchored"><a href="#module-Utils" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Utils/index.html">Utils</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>